{
  "$schema": "https://raw.githubusercontent.com/mspnp/template-building-blocks/master/schemas/buildingBlocks.json",
  "contentVersion": "1.0.0.0",
  "parameters" : {
    "buildingBlocks": {
      "value": [
        {
          "type": "VirtualNetwork",
           "settings": [
            {
            "name": "vnet-test",
                "addressPrefixes": [
                  "10.0.0.0/16"
                ],
                "subnets": [
                {
                  "name": "firewall",
                  "addressPrefix": "10.0.1.0/24"
                }
              ],
              "virtualNetworkPeerings": [
                {
                  "remoteVirtualNetwork": {
                  "name": "msft-spoke1-vnet"
                  },
                  "allowForwardedTraffic": true,
                  "allowGatewayTransit": true,
                  "useRemoteGateways": false
                  }
                ]
            },
            {
                "name": "msft-spoke1-vnet",
                "addressPrefixes": ["10.1.0.0/16"],
                "subnets": [
                  {
                     "name": "web",
                     "addressPrefix": "10.1.1.0/24"
                  }                                
                ],
                "virtualNetworkPeerings": [
                  {
                  "remoteVirtualNetwork": {
                  "name": "vnet-test"
                    },
                    "allowForwardedTraffic": true,
                    "allowGatewayTransit": false,
                    "useRemoteGateways": false
                  }
                ],
                "tags": {
                "department": "HR",
                "managedBy": "DevOps"
               }                            
             }
          ]
        }
      ]
    }
  }
}
